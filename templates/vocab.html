{% extends 'base.html' %}
{% set active_page = "vocab" %}

{% block container %}

    <div class="container-fluid" id="vocab-table-container">
        <table class="table table-striped table-hover" id="vocab-table" style="width: 100%;"></table>
    </div>

    <script type="text/javascript">
        // Initialize vocabulary entries
        let vocab = {{ vocab | safe }};
        let entries = vocab.entries;

        $(document).ready(function () {
            $('#vocab-table').DataTable({
                data: entries,
                columns: [
                    {title: "Hiragana"},
                    {title: "Kanji"},
                    {title: "English"},
                    {
                        title: "Examples_raw",
                        "visible": false,
                        "searchable": false
                    },
                    {
                        title: "Examples",
                        render: function () {
                            return '<button type="button" class="btn btn-outline-primary" id="example-select" disabled>Show</button>\n'
                        }
                    }
                ],
                responsive: true
            });
        });

        $("#vocab-table").on('click', '#example-select', function (e) {
            // Get data from all rows, including hidden ones
            e.preventDefault();
            let currentRow = $(this).closest("tr");
            let data = $('#vocab-table').DataTable().row(currentRow).data();
            console.log(data);
        });
    </script>

{% endblock %}